# Device Finder

Это простое приложение для поиска сетевых устройств по шаблону MAC-адреса. Состоит из
утилиты командной строки и графического интерфейса на Tkinter.

## Требования

- Python 3.8+
- Библиотека `scapy`

Установить зависимости можно командой:

```bash
pip install -r requirements.txt
```

## Командная утилита

```
python find_devices.py --network 192.168.1.0/24 --mac-prefix 00:11:22
```

Сканирует указанный диапазон и выводит найденные IP-адреса, MAC-адреса и имя хоста
("unknown", если определить его не удалось), соответствующие заданному префиксу.
Получение имени сначала пробует NetBIOS-запрос Node Status, затем обратное DNS.

## Графический интерфейс

```
python find_devices_gui.py
```

Запускает простое окно, в котором можно задать подсеть и MAC-префикс,
а затем выполнить поиск устройств. В результатах также отображается имя хоста ("unknown", если его нет).
Имя определяется аналогично: сначала через NetBIOS, затем через DNS.

## Teltonika API Client

Файл `teltonika_api.py` реализует работу с HTTP API роутеров Teltonika. Сначала
производится авторизация запросом `POST /api/login`, после чего полученный токен
используется в заголовке `Authorization` для всех последующих обращений.

Пример чтения конфигурации:

```bash
python teltonika_api.py 192.168.1.1 admin admin GET /wireguard/config
```

Для `POST` и `PUT` запросов можно передать данные через `--data`.
Строка с JSON может содержать лишние завершающие запятые –
клиент попытается их удалить. Если распознать JSON не удастся,
данные будут отправлены как есть:

```bash
python teltonika_api.py 192.168.1.1 admin admin POST /wireguard/config --data '{"data": {"id": "example"}}'
```

При необходимости можно использовать HTTPS и отключить проверку сертификата:

```bash
python teltonika_api.py 192.168.1.1 admin admin GET /wireguard/config --https --no-verify
```

Перед авторизацией утилита проверяет доступность хоста.
Если устройство использует самоподписанный сертификат, клиент
автоматически повторит попытку авторизации с отключенной проверкой.
Флаг `--no-verify` позволяет сразу отключить проверку сертификата.

Ответ выводится как текст или JSON.

## Teltonika API GUI

```bash
python teltonika_api_gui.py
```

Откроет окно, в котором можно указать IP‑адрес, логин и пароль. Сначала
нужно нажать кнопку **Login** для получения токена. Перед авторизацией
проверяется доступность устройства. После успешной
авторизации становятся доступны запросы (GET, POST, PUT, DELETE) к
эндпоинтам API. Поле "Payload" принимает JSON‑строку для POST/PUT.
Лишние завершающие запятые в вводе автоматически удаляются; если
строку всё равно не удаётся разобрать, она отправляется без изменений.
При необходимости можно использовать HTTPS и отключить проверку
сертификата (соответствующие галочки в окне). Ответы выводятся в двух
полях: исходный текст и форматированное представление. Приложение
написано на `tkinter` и может быть запущено под Windows.
Если при авторизации возникает ошибка SSL, клиент
автоматически пробует повторно без проверки сертификата.
В этом случае галочка **Verify SSL** будет снята, чтобы последующие
запросы выполнялись без проверки.
