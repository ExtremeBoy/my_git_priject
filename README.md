# Device Finder

Это простое приложение для поиска сетевых устройств по шаблону MAC-адреса. Состоит из
утилиты командной строки и графического интерфейса на Tkinter.

## Требования

- Python 3.8+
- Библиотека `scapy`

Установить зависимости можно командой:

```bash
pip install -r requirements.txt
```

## Командная утилита

```
python find_devices.py --network 192.168.1.0/24 --mac-prefix 00:11:22
```

Сканирует указанный диапазон и выводит найденные IP-адреса, MAC-адреса и имя хоста
("unknown", если определить его не удалось), соответствующие заданному префиксу.
Получение имени сначала пробует NetBIOS-запрос Node Status, затем обратное DNS.

## Графический интерфейс

```
python find_devices_gui.py
```

Запускает простое окно, в котором можно задать подсеть и MAC-префикс,
а затем выполнить поиск устройств. В результатах также отображается имя хоста ("unknown", если его нет).
Имя определяется аналогично: сначала через NetBIOS, затем через DNS.

## Teltonika API Client

`teltonika_api.py` — это небольшая утилита командной строки для отправки
`ubus`-запросов к роутерам Teltonika. Все обращения к устройству выполняются
по HTTPS. Скрипт сначала выполняет вход, затем отправляет произвольный метод и
выводит **сырое** содержимое ответов от устройства.

Запуск осуществляется так:

```bash
python teltonika_api.py <host> <user> <pass> <object> <method> '<params>'
```

Аргументы:

- `host` – IP-адрес или имя роутера;
- `user` и `pass` – учётные данные;
- `object`/`method` – имя объекта и метода `ubus`;
- `params` – строка с JSON-параметрами (например `"{}"`, если параметров нет).
- `--verify-ssl` – проверять SSL-сертификат устройства (по умолчанию
  отключено, так как на роутерах обычно используется самоподписанный
  сертификат).

Пример запроса статуса сетевого интерфейса:

```bash
python teltonika_api.py 192.168.1.1 admin admin network.interface status "{}"
```

После выполнения будут напечатаны диагностические сообщения и
необработанный JSON-ответ роутера. Типичный вывод выглядит так:

```
Connecting to 192.168.1.1 via HTTPS as 'admin'...
Login HTTP 200
Raw login response:
{"jsonrpc":"2.0","id":1,"result":[0,{"ubus_rpc_session":"..."}]}
Session token obtained
Sending command: object='network.interface', method='status', params={}
Command HTTP 200
Raw command response:
{"jsonrpc":"2.0","id":1,"result":[0,{...}]}
```

## Web UI Router Manager

Запуск веб-интерфейса осуществляется командой:
```bash
python webui.py
```

После запуска будет создана база `webui.db` и пользователь `admin`/`admin`.
В панели можно добавлять роутеры, поднимать SSH-туннели через `autossh` и смотреть
примитивный мониторинг нагрузки (данные берутся через SSH командой `cat /proc/loadavg`).

